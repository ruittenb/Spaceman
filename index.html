<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Spaceman</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Spaceman is a lightweight macOS menu bar app to view, rename, and switch between Spaces (virtual desktops).">
        <meta name="keywords" content="macOS, Spaces, virtual desktops, menu bar, productivity, open source, desktop switcher">
        <meta name="author" content="Sasindu Jayasinghe, René Uittenbogaard">
        <meta property="article:author" content="https://github.com/Jaysce">
        <meta property="article:author" content="https://github.com/ruittenb">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Spaceman – View and switch between macOS Spaces from your menu bar">
        <meta property="og:description" content="A simple, native macOS menu bar app to view, rename, and navigate your Spaces with ease.">
        <meta property="og:url" content="https://ruittenb.github.io/Spaceman/">
        <meta property="og:image" content="https://ruittenb.github.io/Spaceman/images/astronaut.png">

        <link rel="canonical" href="https://ruittenb.github.io/Spaceman/">
        <link rel="icon" href="icons/favicon.ico" sizes="any">
        <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16.png">
        <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
        <style>
            /* {{{ */
            :root {
                --primary-color: #1f2937;
                --secondary-color: #6b7280;
                --accent-color: #e74c78;
                --accent-color-rgb: 231, 76, 120;
                --bg-color: #fff;
                --text-selection: rgba(253, 129, 164, 0.7);
                --link-color: hsla(220, 9%, 46%, 0.15);
                --link-color-hovered: rgba(231, 76, 120, 0.2);
                --button-color: #f3f3f4;
                --video-filter: sepia(1) hue-rotate(190deg) saturate(200%) brightness(80%) contrast(120%) saturate(110%);
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #c3c8ef;
                    --secondary-color: #8e94b6;
                    --accent-color: #e73495;
                    --accent-color-rgb: 231, 52, 149;
                    --bg-color: #111827;
                    --text-selection: rgba(231, 52, 149, 0.6);
                    --link-color: rgba(142, 148, 182, 0.2);
                    --link-color-hovered: rgba(231, 52, 149, 0.2);
                    --button-color: #1a2232;
                }
            }

            /* Above the fold */
            html, body,
            header, main, footer, hgroup, h1, h2, h3, h4,
            div, span, p, a, img, ul, li, dl, dt, dd, hr, svg, path {
                margin: 0;
                padding: 0;
                border: 0;
                font-size: 100%;
                font: inherit;
                vertical-align: baseline;
            }

            body {
                line-height: 1;
                background: var(--bg-color);
                color: var(--primary-color);
                font-family: Sora;
                padding: 0 2rem;
            }
            header, main, footer {
                max-width: 60rem;
                margin: 0 auto;
            }
            header {
                margin-top: 4rem;
            }
            hgroup {
                text-align: center;
                max-width: 80%;
                margin: 0 auto;
            }

            @media only screen and (min-width: 660px) {
                header {
                    margin-top: 8rem;
                }
                hgroup {
                    max-width: 100%;
                }
            }

            h1 {
                font-family: Syne;
                font-weight: 700;
                font-size: 2rem;
                line-height: 1.8rem;
                margin-bottom: 0.6rem;
                color: var(--primary-color);
            }
            h2 {
                color: var(--secondary-color);
                font-size: 1rem;
                line-height: 1.2rem;
            }

            .Spaceman_headerImage {
                width: 84%;
                height: auto;
                display: block;
                margin: 0 auto 2rem;
                border-radius: 12px;
            }

            .AppDetails_grid {
                max-width: 80%;
                margin: 2rem auto;
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 1rem 1.5rem;

                & div {
                    text-align: center;
                    display: flex;
                    flex-direction: column;
                }
                & dt {
                    color: var(--secondary-color);
                    font-size: 0.6rem;
                    letter-spacing: 0.1rem;
                    text-transform: uppercase;
                    opacity: 0.75;
                    margin-bottom: 0.3rem;
                }
                & dd {
                    color: var(--primary-color);
                    font-size: 0.75rem;
                }
            }
            @media only screen and (min-width: 660px) {
                .AppDetails_grid {
                    grid-template-columns: repeat(6, 1fr);
                }
            }
            /* }}} */
        </style>
        <link rel="stylesheet" href="spaceman.css?20251017">
    </head>
    <body>
        <header><!-- {{{ -->
            <img src="images/astronaut.png" alt="Welcome to Spaceman!" class="Spaceman_headerImage">

            <hgroup>
            <h1>Spaceman</h1>
            <h2>A macOS app to view, rename and navigate between Spaces (Virtual Desktops) in the menu bar</h2>
            </hgroup>

            <dl class="AppDetails_grid">
                <div><dt>Platform</dt><dd>macOS 11.0 +</dd></div>
                <div><dt>Size</dt><dd id="app-size">~4.4 MB</dd></div>
                <div><dt>Version</dt><dd id="version-number">v1.12+</dd></div>
                <div><dt>Updated</dt><dd id="updated-date">2025</dd></div>
                <div><dt>Downloads</dt><dd id="downloads">&gt; 1400</dd></div>
                <div><dt>Stars</dt><dd id="stars-count">57</dd></div>
            </dl>

            <div class="Spaceman_buttons">
                <a href="https://github.com/ruittenb/Spaceman" class="Button_button">
                    <span>
                        <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github"
                            class="svg-inline--fa fa-github Button_icon" role="img"
                            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"
                        >
                            <path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6
                                0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1
                                5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6
                                4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1
                                8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2
                                -.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4
                                0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2
                                -112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9
                                -6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27
                                13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8
                                110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2
                                457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2
                                1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1z m-10.8-8.1c-.7
                                1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6 -.3-4.3.7z
                                m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2
                                -2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3
                                1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"
                            />
                        </svg>
                        View on Github
                    </span>
                </a>
                <a href="https://github.com/ruittenb/Spaceman/releases/latest" class="Button_button primary" id="download-button">
                    <span>
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-down"
                            class="svg-inline--fa fa-arrow-down Button_icon" role="img"
                            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                        >
                            <path fill="currentColor" d="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241
                                473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c
                                9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24
                                24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"
                            />
                        </svg>
                        Download App
                    </span>
                </a>
                <a href="https://github.com/ruittenb/Spaceman/blob/main/README.md" class="Button_button" id="readme-button">
                    <span>
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="book"
                            class="svg-inline--fa fa-book Button_icon" role="img"
                            xmlns="http://www.w3.org/2000/svg" viewBox="90 60 450 550"
                        >
                            <path d="M480 576L192 576C139 576 96 533 96 480L96 160C96 107 139 64 192 64L496 64C522.5
                                64 544 85.5 544 112L544 400C544 420.9 530.6 438.7 512 445.3L512 512C529.7 512 544 526.3
                                544 544C544 561.7 529.7 576 512 576L480 576zM192 448C174.3 448 160 462.3 160 480C160
                                497.7 174.3 512 192 512L448 512L448 448L192 448zM224 216C224 229.3 234.7 240 248 240L424
                                240C437.3 240 448 229.3 448 216C448 202.7 437.3 192 424 192L248 192C234.7 192 224
                                202.7 224 216zM248 288C234.7 288 224 298.7 224 312C224 325.3 234.7 336 248 336L424
                                336C437.3 336 448 325.3 448 312C448 298.7 437.3 288 424 288L248 288z"
                            />
                        </svg>
                        User Guide
                    </span>
                </a>
            </div>
        </header><!-- }}} -->

        <main><!-- {{{ -->
            <hr>
            <img src="images/desktop-nibo.png" alt="Spaceman app screenshot" class="Spaceman_appImage">

            <p>
                Spaceman shows your macOS Spaces (Virtual Desktops) in the menu bar, so you can see which
                space you're on relative to all your other spaces. It supports multiple displays and lets
                you name spaces to organize your workflow.
            </p>

            <div class="Spaceman_Fork">
                <h3>About This Fork</h3>
                <p>
                    This app is based on the original Spaceman application created by
                    <a href="https://github.com/Jaysce">Sasindu Jayasinghe</a>. We appreciate this useful
                    app and all the foundational work that went into it. You can visit the
                    <a href="https://www.jaysce.dev/projects/spaceman">original project page</a> and
                    <a href="https://github.com/Jaysce/Spaceman">original repository</a>.
                </p>
                <p>
                    Since the original repository is no longer actively maintained,
                    this fork continues development with bug fixes and new features.
                </p>
            </div>

            <ul class="Spaceman_features">
                <li>
                    <img src="images/icon-palette.png" alt="Customizable" class="feature-icon">
                    <h4>Customizable</h4>
                    <p>
                        Spaceman can be customized with 5 different icon styles in 5 different sizes.
                        Have a minimal view of your space or have them named.
                    </p>

                    <div class="Spaceman_stylesGrid">
                        <small>Numbers</small> <img src="images/style-numbers.png" alt="Numbers style">
                        <small>Names</small> <img src="images/style-names.png" alt="Names style">
                        <small>Numbers and Names</small> <img src="images/style-nums-names.png" alt="Numbers and names style">
                        <small>Dual Rows</small> <img src="images/style-dual-rows.png" alt="Dual rows style">
                    </div>
                </li>
                <li>
                    <img src="images/icon-shuttle.png" alt="Navigational" class="feature-icon">
                    <h4>Navigational</h4>
                    <p>
                        Switch between spaces with a simple click on the menu bar icon.
                    </p>

                    <video
                        id="spaceman-demo-video" src="images/animation.mov" autoplay muted loop
                        onclick="toggleVideo(this)"
                    />
                </li>
                <li>
                    <img src="images/icon-alien.png" alt="Native" class="feature-icon">
                    <h4>Native</h4>
                    <p>
                        Compiled to a universal binary to support both Apple Silicon and Intel Macs.
                    </p>
                </li>
                <li>
                    <img src="images/icon-book-hologram.png" alt="Open-source" class="feature-icon">
                    <h4>Open-source</h4>
                    <p>
                        Fully open source under the MIT license. Contributions and pull requests are welcome.
                    </p>
                </li>
            </ul>
            <hr>
        </main><!-- }}} -->

        <footer>
            <img src="images/icon-dish.png" alt="Contact" class="footer-icon">
            <a href="https://github.com/ruittenb/Spaceman">Contact</a>
        </footer>

        <script lang="js">
            // {{{
            const REPO_API = 'https://api.github.com/repos/ruittenb/Spaceman';

            // Toggle video play/pause
            function toggleVideo(video) {
                if (video.paused) {
                    video.play();
                } else {
                    video.pause();
                }
            }

            // Start a counter
            function startInterimCounter({ start = 0, step = 10, intervalMs = 300 } = {}) {
              let displayedCount = start;
              let isRunning = true;

              const id = setInterval(() => {
                if (!isRunning) return;
                displayedCount += step;
                updateDownloadsInfo(displayedCount, { isLoading: true });
              }, intervalMs);

              return {
                stop() {
                  isRunning = false;
                  clearInterval(id);
                },
                get value() {
                  return displayedCount;
                },
                set value(v) {
                  displayedCount = v;
                }
              };
            }

            // Fetch repository info and update stars count
            async function updateRepoInfo() {
                try {
                    const response = await fetch(REPO_API);
                    const repo = await response.json();

                    // Update stars count
                    const starsElement = document.getElementById('stars-count');
                    if (starsElement && repo.stargazers_count !== undefined) {
                        starsElement.textContent = repo.stargazers_count.toString();
                    }
                } catch (error) {
                    console.warn('Failed to fetch repository info:', error);
                }
            }

            // Fetch the latest release and update download button and version info
            async function updateReleaseInfo() {
                try {
                    const response = await fetch(`${REPO_API}/releases/latest`);
                    const release = await response.json();

                    // Update version number
                    const versionElement = document.getElementById('version-number');
                    if (versionElement && release.tag_name) {
                        versionElement.textContent = release.tag_name;
                    }

                    // Update date (format: DD MMM YYYY)
                    const dateElement = document.getElementById('updated-date');
                    if (dateElement && release.updated_at) {
                        const date = new Date(release.updated_at);
                      dateElement.textContent = new Intl.DateTimeFormat('en-GB', {
                          day: 'numeric',
                          month: 'short',
                          year: 'numeric'
                        }).format(date);
                    }

                    // Find the DMG asset and update download button and size
                    const dmgAsset = release.assets.find(asset => asset.name.endsWith('.dmg'));
                    if (dmgAsset) {
                        // Update download button
                        const downloadButton = document.getElementById('download-button');
                        downloadButton.href = dmgAsset.browser_download_url;

                        // Update size (convert bytes to MB, rounded to 1 decimal place)
                        const sizeElement = document.getElementById('app-size');
                        if (sizeElement && dmgAsset.size) {
                            const sizeInMB = (dmgAsset.size / (1024 * 1024)).toFixed(1);
                            sizeElement.textContent = `${sizeInMB} MB`;
                        }
                    }
                } catch (error) {
                    // If the API call fails, elements will keep their fallback values
                    console.warn('Failed to fetch latest release:', error);
                }
            }

            // Display the number of downloads on the page
            function updateDownloadsInfo(downloads, { showPrefix = true, isLoading = false }) {
                const downloadsElement = document.getElementById('downloads');
                if (downloadsElement) {
                    const prefix = showPrefix  || isLoading ? "&gt; " : "";
                    downloadsElement.innerHTML = prefix + String(downloads);
                }
            }

            // Fetch the download info from github
            async function getGithubDownloads() {
                let allReleases = [];
                let page = 1;

                try {
                    while (true) {
                        const response = await fetch(`${REPO_API}/releases?page=${page}&per_page=100`);
                        const releases = await response.json();
                        if (releases.length === 0) break;
                        allReleases.push(...releases);
                        page++;
                    }

                    let downloadsByRelease = '';
                    let totalDownloads = 0;

                    allReleases.forEach(release => {
                        const downloads = release.assets.reduce((sum, asset) => sum + asset.download_count, 0);
                        downloadsByRelease += `${release.tag_name}: ${downloads}\n`;
                        totalDownloads += downloads;
                    });

                    console.log(downloadsByRelease);
                    return totalDownloads;
                } catch (error) {
                    console.warn('Failed to fetch download data:', error);
                    return 0;
                }
            }

            // Fetch the download info from Softpedia
            async function getSoftpediaDownloadsViaProxy() {
                const url = 'https://mac.softpedia.com/get/System-Utilities/Spaceman.shtml';
                const proxy = 'https://r.jina.ai/http://'; // zet https->http of http->http passend om
                const text = await fetch(proxy + url.replace(/^https?:\/\//, '')).then(r => r.text());
                const m = text.match(/(^|\b)([\d.,]+)\s+downloads?\s+so\s+far\b/i);
                const downloads = m ? parseInt(m[2].replace(/[.,\s]/g, ''), 10) : 0;
                console.log(`Softpedia: ${downloads}`);
                return downloads;
            }

            function animateToTarget(currentValue, finalValue, onUpdate, onDone) {
              if (currentValue >= finalValue) {
                onUpdate(finalValue);
                onDone?.();
                return;
              }

              const timer = setInterval(() => {
                const diff = finalValue - currentValue;

                let step;
                if (diff > 500) step = 100;
                else if (diff > 50) step = 10;
                else step = 1;

                currentValue += step;
                onUpdate(currentValue);

                if (currentValue >= finalValue) {
                  clearInterval(timer);
                  onDone?.();
                }
              }, 30);
            }

            function initDownloadsCounter() {
                // Start immediate optimistic counting
                const interim = startInterimCounter({ start: 0, step: 10, intervalMs: 100 });

                // Kick off your existing data fetches
                Promise.allSettled([
                    getSoftpediaDownloadsViaProxy(),
                    getGithubDownloads()
                ])
                .then((results) => {
                    const finalValue = results.reduce((acc, res) => {
                        acc += res.status === 'fulfilled' ? Number(res.value || 0) : 0;
                        return acc;
                    }, 0);

                    // Stop interim and animate to truth
                    interim.stop();

                    animateToTarget(
                        interim.value,
                        finalValue,
                        v => updateDownloadsInfo(v, { showPrefix: true }),
                        () => updateDownloadsInfo(finalValue, { showPrefix: false })
                    );
                })
            }

            // Update all stats when the page loads
            document.addEventListener('DOMContentLoaded', () => {
                updateRepoInfo();
                updateReleaseInfo();
                initDownloadsCounter();
            });
            // }}}
        </script>
    </body>
</html>
<!-- vim: set foldenable foldmethod=marker: -->
